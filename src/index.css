@import "tailwindcss";
@import "prismjs/themes/prism-tomorrow.css";

@layer base {
  body {
    @apply bg-gray-50 text-gray-900;
  }
}

/* =========================
   JSON Editor (react-simple-code-editor)
   ========================= */

.json-editor {
  border: 1px solid #e5e7eb;
  border-radius: 0.75rem;
  background: #0b1120;
  color: #e2e8f0;

  position: relative;

  /* высота редактора (как у тебя было) */
  min-height: 192px;
  max-height: 320px;

  /* важно: не даём контейнеру расти бесконечно */
  overflow: hidden;

  font-family: "Fira Code", "Fira Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    "Liberation Mono", "Courier New", monospace;

  font-size: 14px;

  /* фиксируем в px, чтобы не ловить округления */
  line-height: 20px;

  /* tab-size лучше числом */
  tab-size: 2;

  /* чтобы у pre/textarea всегда была одинаковая ширина при появлении скролла */
  scrollbar-gutter: stable;
}

/* Оба слоя должны быть 1-в-1 по метрикам и переносам */
.json-editor__pre,
.json-editor__textarea {
  box-sizing: border-box;

  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  tab-size: inherit;

  padding: 12px;

  white-space: pre-wrap;
  word-break: break-word;
  overflow-wrap: anywhere;

  /* важно для одинаковой ширины при скролле */
  scrollbar-gutter: stable;
}

/* Подсветка: тоже делаем overflow:auto, чтобы ширина/перенос совпадали с textarea,
   но скроллбар прячем, а прокрутку синхронизирует компонент. */
.json-editor__pre {
  margin: 0;
  pointer-events: none;
  overflow: auto;
}

/* прячем скроллбар у pre (чтобы был только один визуальный скролл) */
.json-editor__pre {
  -ms-overflow-style: none; /* IE/Edge legacy */
  scrollbar-width: none; /* Firefox */
}
.json-editor__pre::-webkit-scrollbar {
  width: 0;
  height: 0;
}

/* Prism иногда переопределяет code */
.json-editor__pre code {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}

/* Ввод */
.json-editor__textarea {
  /* textarea у react-simple-code-editor обычно absolute, но мы гарантируем */
  position: absolute;
  inset: 0;

  width: 100%;
  height: 100%;

  border: 0;
  outline: none;
  resize: none;

  background: transparent;

  overflow: auto;

  color: transparent;
  -webkit-text-fill-color: transparent;
  caret-color: #38bdf8;
}

.json-editor__textarea::selection {
  background-color: rgba(56, 189, 248, 0.35);
}
